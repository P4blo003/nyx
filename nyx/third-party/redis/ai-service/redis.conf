##################################
# NETWORK
##################################

bind 0.0.0.0
port 6379
protected-mode yes

tcp-backlog 511
timeout 0
tcp-keepalive 300

##################################
# GENERAL
##################################

daemonize no
supervised no

loglevel notice
logfile ""

databases 1

##################################
# MEMORY MANAGEMENT (CACHE MODE)
##################################

# Hard memory limit (must match container limits)
maxmemory 2gb

# Cache eviction policy
maxmemory-policy allkeys-lru

# Non-blocking memory release
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes

##################################
# PERSISTENCE (DISABLED)
##################################

save ""
appendonly no

##################################
# PERFORMANCE
##################################

# Internal housekeeping frequency
hz 10
dynamic-hz yes

# Client buffers
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

##################################
# THREADING (REDIS 6+)
##################################

io-threads 4
io-threads-do-reads yes

##################################
# LATENCY / OBSERVABILITY
##################################

latency-monitor-threshold 100
slowlog-log-slower-than 10000
slowlog-max-len 128

##################################
# SECURITY HARDENING
##################################

# Disable dangerous commands
rename-command FLUSHALL ""
rename-command FLUSHDB ""
rename-command CONFIG ""
rename-command SHUTDOWN ""

##################################
# REPLICATION (OPTIONAL, FUTURE)
##################################

# replica-read-only yes
# repl-disable-tcp-nodelay no